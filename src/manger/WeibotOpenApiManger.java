package manger;import java.rmi.RemoteException;import java.rmi.registry.LocateRegistry;import java.rmi.registry.Registry;import org.apache.log4j.Logger;import rmi.wbOpenApi.WeibotOpenApiRmi;import weibo4j.model.User;public class WeibotOpenApiManger {	private static WeibotOpenApiRmi woar = null;	private static String ip = "";	private static String port = "";	private static String name = "";	private static Logger RmiMangerLogger = Logger			.getLogger(WeibotOpenApiManger.class);	public static void init(String pStrSaeDB) throws Exception {		String[] split = pStrSaeDB.split(",");		ip = split[0];		port = split[1];		name = split[2];		tagConnect(ip, port, name);	}	private static boolean tagConnect(String pIP, String pPort, String pName) {		RmiMangerLogger.info("tagConnect\tparameter\t" + pIP + ":" + pPort + "/"				+ pName);		boolean succ = false;		try {			Registry registry = LocateRegistry.getRegistry(pIP, new Integer(					pPort));			woar = (WeibotOpenApiRmi) registry.lookup(pName);			ip = pIP;			port = pPort;			name = pName;			RmiMangerLogger.info("tagConnect\tconnect_ok\t" + pIP + ":" + pPort					+ "/" + pName);			succ = true;		} catch (Exception e) {			RmiMangerLogger.info("Exception\tagConnect\t" + pIP + ":" + pPort					+ "/" + pName + "\t" + e.getLocalizedMessage());		}		return succ;	}	private static  boolean tagReConnect() {		boolean succ = false;		try {			Registry registry = LocateRegistry.getRegistry(ip,					new Integer(port));			woar = (WeibotOpenApiRmi) registry.lookup(name);			RmiMangerLogger.info("tagConnect\tconnect_ok\t" + ip + ":" + port					+ "/" + name);			succ = true;		} catch (Exception e) {			RmiMangerLogger.info("Exception\tagConnect\t" + ip + ":" + port + "/"					+ name + "\t" + e.getLocalizedMessage());		}		return succ;	}	public static User getUserInfo(String uid) {		User user = null;		try {			user = woar.getUserInfoById(uid);		} catch (RemoteException e) {			tagReConnect();			try {				user = woar.getUserInfoById(uid);			} catch (Exception e1) {				RmiMangerLogger.info("Exception\tuidToScreename\t"						+ e1.getLocalizedMessage());				return null;			}		}		return user;	}}